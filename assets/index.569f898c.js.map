{"version":3,"file":"index.569f898c.js","sources":["../../vite/modulepreload-polyfill","../../src/helpers/kle.js","../../src/helpers/utils.js","../../src/helpers/constants.js","../../src/store/index.js","../../src/hooks/index.jsx","../../src/components/Palette.jsx","../../src/components/Keycap.jsx","../../src/components/Keyboard.jsx","../../src/components/TextArea.jsx","../../src/components/LayerSelector.jsx","../../src/components/App.jsx","../../src/index.jsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import { cloneDeep, merge } from \"lodash\"\n\nconst DEFAULT_PROPS = {\n  x: 0,\n  y: 0,\n  x2: 0,\n  y2: 0, // position\n  width: 1,\n  height: 1,\n  width2: 1,\n  height2: 1, // size\n  rotation_angle: 0,\n  rotation_x: 0,\n  rotation_y: 0, // rotation\n  labels: [],\n  textColor: [],\n  textSize: [], // label properties\n  default: { textColor: \"#000000\", textSize: 3 }, // label defaults\n  color: \"#cccccc\",\n  profile: \"\",\n  nub: false, // cap appearance\n  ghost: false,\n  stepped: false,\n  decal: false, // miscellaneous options\n  sm: \"\",\n  sb: \"\",\n  st: \"\", // switch\n}\n\nconst DEFAULT_META = {\n  backcolor: \"#eeeeee\",\n  name: \"\",\n  author: \"\",\n  notes: \"\",\n  background: undefined,\n  radii: \"\",\n  switchMount: \"\",\n  switchBrand: \"\",\n  switchType: \"\",\n}\n\n// Map from serialized label position to normalized position,\n// depending on the alignment flags.\nconst labelMap = [\n  // 0  1  2  3  4  5  6  7  8  9 10 11   // align flags\n  [0, 6, 2, 8, 9, 11, 3, 5, 1, 4, 7, 10], // 0 = no centering\n  [1, 7, -1, -1, 9, 11, 4, -1, -1, -1, -1, 10], // 1 = center x\n  [3, -1, 5, -1, 9, 11, -1, -1, 4, -1, -1, 10], // 2 = center y\n  [4, -1, -1, -1, 9, 11, -1, -1, -1, -1, -1, 10], // 3 = center x & y\n  [0, 6, 2, 8, 10, -1, 3, 5, 1, 4, 7, -1], // 4 = center front (default)\n  [1, 7, -1, -1, 10, -1, 4, -1, -1, -1, -1, -1], // 5 = center front & x\n  [3, -1, 5, -1, 10, -1, -1, -1, 4, -1, -1, -1], // 6 = center front & y\n  [4, -1, -1, -1, 10, -1, -1, -1, -1, -1, -1, -1], // 7 = center front & x & y\n]\n\nfunction defaultKeyProps() {\n  return cloneDeep(DEFAULT_PROPS)\n}\n\nfunction defaultMetaData() {\n  return cloneDeep(DEFAULT_META)\n}\n\nfunction deserializeError(msg, data) {\n  throw new Error(`Error: ${msg}${data ? `:\\n  ${JSON.stringify(data)}` : \"\"}`)\n}\n\nfunction reorderLabelsIn(labels, align, skipdefault) {\n  const ret = []\n  for (let i = skipdefault ? 1 : 0; i < labels.length; ++i) {\n    ret[labelMap[align][i]] = labels[i]\n  }\n  return ret\n}\n\nfunction deserialize(rows) {\n  // Initialize with defaults\n  const current = defaultKeyProps()\n  const meta = defaultMetaData()\n  const keys = []\n  const cluster = { x: 0, y: 0 }\n  let align = 4\n  for (let r = 0; r < rows.length; ++r) {\n    if (rows[r] instanceof Array) {\n      rows[r].forEach((key, k) => {\n        if (typeof key === \"string\") {\n          const newKey = cloneDeep(current)\n          newKey.width2 = newKey.width2 === 0 ? current.width : current.width2\n          newKey.height2 =\n            newKey.height2 === 0 ? current.height : current.height2\n          newKey.labels = reorderLabelsIn(key.split(\"\\n\"), align)\n          newKey.textSize = reorderLabelsIn(newKey.textSize, align)\n\n          // Clean up the data\n          for (let i = 0; i < 12; ++i) {\n            if (!newKey.labels[i]) {\n              newKey.textSize[i] = undefined\n              newKey.textColor[i] = undefined\n            }\n            if (newKey.textSize[i] == newKey.default.textSize)\n              newKey.textSize[i] = undefined\n            if (newKey.textColor[i] == newKey.default.textColor)\n              newKey.textColor[i] = undefined\n          }\n\n          // Add the key!\n          keys.push(newKey)\n\n          // Set up for the next key\n          current.x += current.width\n          current.width = current.height = 1\n          current.x2 = current.y2 = current.width2 = current.height2 = 0\n          current.nub = current.stepped = current.decal = false\n        } else {\n          if (key.r != null) {\n            if (k != 0) {\n              deserializeError(\n                \"'r' can only be used on the first key in a row\",\n                key,\n              )\n            }\n            current.rotation_angle = key.r\n          }\n          if (key.rx != null) {\n            if (k != 0) {\n              deserializeError(\n                \"'rx' can only be used on the first key in a row\",\n                key,\n              )\n            }\n            current.rotation_x = cluster.x = key.rx\n            merge(current, cluster)\n          }\n          if (key.ry != null) {\n            if (k != 0) {\n              deserializeError(\n                \"ry' can only be used on the first key in a row\",\n                key,\n              )\n            }\n            current.rotation_y = cluster.y = key.ry\n            merge(current, cluster)\n          }\n          if (key.a != null) {\n            align = key.a\n          }\n          if (key.f) {\n            current.default.textSize = key.f\n            current.textSize = []\n          }\n          if (key.f2) {\n            for (let i = 1; i < 12; ++i) {\n              current.textSize[i] = key.f2\n            }\n          }\n          if (key.fa) {\n            current.textSize = key.fa\n          }\n          if (key.p) {\n            current.profile = key.p\n          }\n          if (key.c) {\n            current.color = key.c\n          }\n          if (key.t) {\n            const split = key.t.split(\"\\n\")\n            current.default.textColor = split[0]\n            current.textColor = reorderLabelsIn(split, align)\n          }\n          if (key.x) {\n            current.x += key.x\n          }\n          if (key.y) {\n            current.y += key.y\n          }\n          if (key.w) {\n            current.width = current.width2 = key.w\n          }\n          if (key.h) {\n            current.height = current.height2 = key.h\n          }\n          if (key.x2) {\n            current.x2 = key.x2\n          }\n          if (key.y2) {\n            current.y2 = key.y2\n          }\n          if (key.w2) {\n            current.width2 = key.w2\n          }\n          if (key.h2) {\n            current.height2 = key.h2\n          }\n          if (key.n) {\n            current.nub = key.n\n          }\n          if (key.l) {\n            current.stepped = key.l\n          }\n          if (key.d) {\n            current.decal = key.d\n          }\n          if (key.g != null) {\n            current.ghost = key.g\n          }\n          if (key.sm) {\n            current.sm = key.sm\n          }\n          if (key.sb) {\n            current.sb = key.sb\n          }\n          if (key.st) {\n            current.st = key.st\n          }\n        }\n      })\n\n      // End of the row\n      current.y++\n    } else if (typeof rows[r] === \"object\") {\n      if (r !== 0) {\n        deserializeError(\"keyboard metadata must the be first element\", rows[r])\n      }\n      merge(meta, rows[r])\n    }\n    current.x = current.rotation_x\n  }\n  return { meta, keys }\n}\n\nexport { deserialize }\n","import color from \"color\"\nimport jsonic from \"jsonic\"\n\nimport { deserialize } from \"./kle\"\n\nexport function rgb2qmk(hex) {\n  const [h, s, v] = color(hex).hsv().array()\n\n  return `{${[\n    Math.round((h / 360) * 255),\n    Math.round((s / 100) * 255),\n    Math.round((v / 100) * 255),\n  ].join(\",\")}}`\n}\n\nexport function tryParse(input) {\n  let parsed = []\n\n  try {\n    parsed = JSON.parse(input)\n  } catch (e1) {\n    try {\n      // try to parse as JSONL\n      parsed = jsonic(`[${input}]`)\n    } catch (e2) {}\n  }\n\n  return deserialize(parsed)\n}\n","import color from \"color\"\nimport { range } from \"lodash\"\n\nconst LOCAL_STORAGE_KEY = \"qmk-matrix-configurator\"\n\nconst COLORS = range(360)\n  .filter((i) => i % 16 === 0)\n  .map((h) => {\n    return color.hsl(h, 100, 50)\n  })\n  .concat([color.hsv(0, 0, 100), color.hsv(0, 100, 0)])\n\nexport { LOCAL_STORAGE_KEY, COLORS }\n","import { range } from \"lodash\"\nimport color from \"color\"\n\nimport { rgb2qmk, tryParse } from \"../helpers/utils\"\nimport { COLORS, LOCAL_STORAGE_KEY } from \"../helpers/constants\"\n\nexport function createStore() {\n  return {\n    activeLayer: 0,\n    activeColor: COLORS[0],\n    input: \"\",\n    layers: [],\n    layerCount: 4,\n    layoutError: \"\",\n    lightsOff: true,\n    displayLabels: false,\n    isEditingLayout: false,\n\n    get asQMK() {\n      return `const uint8_t PROGMEM rgb_matrix_led_map[][DRIVER_LED_TOTAL][${\n        this.layerCount\n      }] = {\\n${this.layers\n        .map((leds) => `   { ${leds.map(rgb2qmk).join(\", \")} }`)\n        .join(\",\\n\")}\\n};`\n    },\n    get isLayoutEmpty() {\n      return this.layout.keys.length === 0 || this.layers.length == 0\n    },\n    get isLayoutValid() {\n      return !this.layoutError\n    },\n    setActiveColor(color) {\n      this.activeColor = color\n    },\n    setActiveLayer(index) {\n      this.activeLayer = index\n    },\n    toggleRGBColor(i) {\n      if (this.layers[this.activeLayer][i] === this.activeColor) {\n        this.layers[this.activeLayer][i] = color.hsv(0, 0, 0)\n      } else {\n        this.layers[this.activeLayer][i] = this.activeColor\n      }\n    },\n    fillLayer(color) {\n      this.layers[this.activeLayer].forEach((_, i) => {\n        this.layers[this.activeLayer][i] = color\n      })\n    },\n    toggleLabels() {\n      this.displayLabels = !this.displayLabels\n    },\n    toggleLights() {\n      this.lightsOff = !this.lightsOff\n    },\n    toggleEditingLayout() {\n      this.isEditingLayout = !this.isEditingLayout\n    },\n    setInput(input) {\n      this.input = input\n      this.resetLayers()\n    },\n    get layout() {\n      try {\n        return tryParse(this.input)\n      } catch (e) {\n        this.layoutError = e.message\n        return { meta: {}, keys: [] }\n      }\n    },\n    resetLayers() {\n      this.layers = range(this.layerCount).map(() => {\n        return new Array(this.layout.keys.length).map(() => color.hsv(0, 0, 0))\n      })\n    },\n    setLayerCount(count) {\n      if (this.activeLayer >= count) {\n        this.activeLayer = count - 1\n      }\n\n      if (count > this.layerCount) {\n        this.activeLayer = count - 1\n      }\n\n      this.layers = range(count).map((l) => {\n        return range(this.layout.keys.length).map(\n          (i) => (this.layers[l] && this.layers[l][i]) ?? color.hsv(0, 0, 0),\n        )\n      })\n      this.layerCount = count\n    },\n\n    loadFile(e) {\n      const [file] = e.target.files\n      if (!file) return\n\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        // handle KLE JSON(L)\n        const result = tryParse(e.target.result)\n\n        if (result.keys && result.keys.length === 0) {\n          // handle VIA JSON\n          const parsed = JSON.parse(e.target.result)\n          if (parsed.layouts && parsed.layouts.keymap) {\n            this.setInput(JSON.stringify(parsed.layouts.keymap))\n          }\n        } else {\n          this.setInput(e.target.result)\n        }\n      }\n      reader.readAsText(file)\n    },\n    async paste() {\n      this.setInput(await navigator.clipboard.readText())\n    },\n    restoreState() {\n      const data = localStorage.getItem(LOCAL_STORAGE_KEY)\n      if (data) {\n        Object.assign(this, JSON.parse(data))\n      }\n    },\n    persistState() {\n      localStorage.setItem(\n        LOCAL_STORAGE_KEY,\n        JSON.stringify({\n          input: this.input,\n          layerCount: this.layerCount,\n          layers: this.layers.map((layer) =>\n            layer.map((x) => color(x).hsl().toString()),\n          ),\n          lightsOff: this.lightsOff,\n          displayLabels: this.displayLabels,\n        }),\n      )\n    },\n  }\n}\n","import React from \"react\"\nimport { useLocalObservable } from \"mobx-react\"\nimport { autorun } from \"mobx\"\n\nimport { createStore } from \"../store\"\n\nconst StoreContext = React.createContext(null)\n\nexport const StoreProvider = ({ children }) => {\n  const store = useLocalObservable(createStore)\n  store.restoreState()\n\n  autorun(() => {\n    store.persistState()\n  })\n\n  return <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\n}\n\nexport const useStore = () => {\n  return React.useContext(StoreContext)\n}\n","import classNames from \"classnames\"\nimport { observer } from \"mobx-react\"\n\nconst Palette = ({ activeColor, colors, onSelectColor }) => {\n  return (\n    <div className=\"flex flex-wrap space-x-2\">\n      {colors.map((color) => (\n        <button\n          key={color}\n          className={classNames(\"rounded w-8 h-8\", {\n            outline: activeColor == color,\n          })}\n          style={{ backgroundColor: color }}\n          onClick={() => onSelectColor(color)}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default observer(Palette)\n","import classNames from \"classnames\"\nimport color from \"color\"\nimport { isEqual } from \"lodash\"\nimport { observer } from \"mobx-react\"\n\n// check https://github.com/Ciantic/keymapceditor\n\nconst LABEL_CLASSES = [\n  \"items-start justify-start\",\n  \"items-start justify-center\",\n  \"items-start justify-end\",\n  \"items-center justify-start\",\n  \"items-center justify-center \",\n  \"items-center justify-end\",\n  \"items-end justify-start\",\n  \"items-end justify-center\",\n  \"items-end justify-end\",\n]\n\nconst Keycap = ({\n  x,\n  y,\n  width,\n  height,\n  keySize,\n  padding,\n  color: keyColor,\n  rgbColor = color.hsv(0, 0, 0),\n  onClick,\n  labels,\n  legendColor,\n  textColor,\n  title,\n  lightsOff = false,\n  displayLabels = false,\n}) => {\n  const actualWidth = keySize * width\n  const actualHeight = keySize * height\n\n  const innerScale = keySize / 4\n  const innerWidth = actualWidth - innerScale\n  const innerHeight = actualHeight - innerScale\n\n  keyColor = color(keyColor).fade(lightsOff ? 0.96 : 0)\n  rgbColor = color(rgbColor)\n\n  if (isEqual(rgbColor.hsv().array(), [0, 0, 0])) {\n    rgbColor = color(\"transparent\")\n  }\n\n  const borderRadius = keySize * 0.1\n  const positions = [\"bottom\", \"left\"]\n\n  return (\n    <a\n      {...{ onClick, title }}\n      className=\"absolute text-xs cursor-copy select-none\"\n      style={{\n        borderRadius,\n        width: actualWidth - padding,\n        height: actualHeight - padding,\n        top: keySize * y,\n        left: keySize * x,\n        background: [\n          `linear-gradient(${keyColor}, ${keyColor}) no-repeat border-box`,\n          ...positions.map(\n            (side) =>\n              `radial-gradient(circle at ${side}, ${keyColor.darken(\n                0.2,\n              )} 90%, transparent 70%) no-repeat border-box`,\n          ),\n          keyColor,\n        ],\n        boxShadow: [\n          `inset ${color(\"black\").alpha(0.2)} 0px ${\n            keySize * 0.05\n          }px ${Math.round(keySize * 0.1)}px`,\n          `inset ${rgbColor.alpha(0.25)} 0px -${keySize * 0.05}px ${Math.round(\n            keySize * 0.1,\n          )}px`,\n          ...(rgbColor && [\n            `inset ${rgbColor.alpha(0.1)} 0px 0px ${Math.round(\n              keySize * 0.3,\n            )}px `,\n            `inset ${rgbColor.alpha(0.5)} 0px -${keySize * 0.05}px ${Math.round(\n              keySize * 0.1,\n            )}px`,\n            `${rgbColor} 0px 0px ${Math.round(keySize * 0.1)}px ${\n              keySize * 0.04\n            }px`,\n          ]),\n        ],\n      }}\n    >\n      <div\n        className=\"relative border\"\n        style={{\n          top: keySize * 0.05,\n          left: (actualWidth - padding - innerWidth) / 2,\n          width: innerWidth,\n          height: innerHeight,\n          color: legendColor,\n          borderColor: keyColor.lighten(0.05),\n          boxShadow: [\n            `inset ${color(\"white\").alpha(0.2)} 0px 0px ${Math.round(\n              keySize * 0.1,\n            )}px`,\n          ],\n          background: [\n            `linear-gradient(${keyColor}, ${keyColor}) no-repeat border-box`,\n            `linear-gradient(${keyColor}, ${keyColor.darken(\n              0.1,\n            )}) no-repeat border-box`,\n            `radial-gradient(circle at center, ${keyColor}, ${keyColor}, ${keyColor.darken(\n              0.2,\n            )}) no-repeat border-box`,\n          ],\n          borderRadius,\n        }}\n      >\n        {displayLabels &&\n          labels.map(\n            (label, i) =>\n              label && (\n                <span\n                  key={i}\n                  className={classNames(\n                    \"absolute flex overflow-hidden\",\n                    LABEL_CLASSES[i],\n                  )}\n                  style={{\n                    top: borderRadius / 2,\n                    left: borderRadius / 2,\n                    bottom: borderRadius / 2,\n                    right: borderRadius / 2,\n                    color: textColor[i],\n                  }}\n                >\n                  {label}\n                </span>\n              ),\n          )}\n      </div>\n    </a>\n  )\n}\n\nexport default observer(Keycap)\n","import { observer } from \"mobx-react\"\n\nimport Keycap from \"./Keycap\"\n\n// Check http://www.miragecraft.com/projects/keymason.html\n\nconst Keyboard = ({\n  layout,\n  keySize = 64,\n  padding = 5,\n  onClickKey,\n  rgbColor,\n  lightsOff,\n  displayLabels,\n}) => {\n  if (layout.keys.length === 0) {\n    return null\n  }\n\n  return (\n    <div className=\"flex overflow-x-auto overflow-y-visible items-center justify-center p-1 text-black\">\n      <div\n        className=\"relative\"\n        style={{\n          height: Math.max(\n            ...layout.keys.map(\n              (row) => (row.y + row.height) * keySize - padding,\n            ),\n          ),\n          width: Math.max(\n            ...layout.keys.map(\n              (row) => (row.x + row.width) * keySize - padding,\n            ),\n          ),\n        }}\n      >\n        {layout.keys.map((key, i) => {\n          return (\n            <Keycap\n              key={i}\n              {...key}\n              {...{ keySize, padding, lightsOff, displayLabels }}\n              rgbColor={rgbColor(i)}\n              onClick={() => {\n                onClickKey(i)\n              }}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default observer(Keyboard)\n","import { observer } from \"mobx-react\"\nimport { useRef, useState, useEffect } from \"react\"\n\nimport IcBaselineCopy from \"~icons/ic/baseline-content-copy\"\n\nconst TextArea = ({\n  value,\n  showCopy,\n  minRows = 4,\n  maxRows = 10,\n  onChange,\n  ...props\n}) => {\n  const ref = useRef(null)\n  const [rows, setRows] = useState(minRows)\n\n  useEffect(() => {\n    const { scrollHeight } = ref.current\n    let { lineHeight } = getComputedStyle(ref.current)\n    lineHeight = Number(lineHeight.replace(/px$/, \"\"))\n    const currentRows = Math.ceil(scrollHeight / lineHeight)\n    setRows(Math.min(maxRows, Math.max(currentRows, minRows)))\n  }, [value, maxRows, minRows])\n\n  return (\n    <div className=\"relative\">\n      <textarea\n        ref={ref}\n        rows={rows}\n        className=\"px-2 py-1 w-full font-mono text-xs whitespace-pre bg-neutral-900 rounded outline-none\"\n        value={value}\n        onChange={onChange}\n        {...props}\n      />\n      {showCopy && (\n        <a\n          className=\"block absolute right-0 top-0 m-2 p-2 bg-neutral-600 rounded cursor-pointer\"\n          onClick={() => navigator.clipboard.writeText(value)}\n        >\n          <IcBaselineCopy />\n        </a>\n      )}\n    </div>\n  )\n}\n\nexport default observer(TextArea)\n","import classNames from \"classnames\"\nimport { observer } from \"mobx-react\"\n\nimport IcBaselineAdd from \"~icons/ic/baseline-add\"\nimport IcBaselineMinus from \"~icons/ic/baseline-minus\"\n\nconst Button = ({ className, ...props }) => (\n  <a\n    {...props}\n    className={classNames(\n      \"cursor-pointer w-8 h-8 flex items-center justify-center rounded\",\n      className,\n    )}\n  />\n)\n\nconst LayerSelector = ({\n  layers,\n  activeLayer,\n  onSelect,\n  onChangeLayerCount,\n}) => (\n  <div className=\"flex\">\n    {layers.map((layer, i) => (\n      <Button\n        key={i}\n        className={classNames({\n          \"font-bold bg-neutral-700 \": activeLayer === i,\n        })}\n        onSelect={onSelect}\n        onClick={() => {\n          onSelect(i)\n        }}\n      >\n        {i}\n      </Button>\n    ))}\n    <Button\n      onClick={() => {\n        onChangeLayerCount(1)\n      }}\n    >\n      <IcBaselineAdd />\n    </Button>\n    {layers.length > 1 && (\n      <Button\n        onClick={() => {\n          onChangeLayerCount(-1)\n        }}\n      >\n        <IcBaselineMinus />\n      </Button>\n    )}\n  </div>\n)\n\nexport default observer(LayerSelector)\n","import { observer } from \"mobx-react\"\nimport classNames from \"classnames\"\nimport color from \"color\"\n\nimport { useStore } from \"../hooks\"\nimport { COLORS } from \"../helpers/constants\"\n\nimport Palette from \"./Palette\"\nimport Keyboard from \"./Keyboard\"\nimport TextArea from \"./TextArea\"\nimport LayerSelector from \"./LayerSelector\"\n\nimport IcBaselineKeyboard from \"~icons/ic/baseline-keyboard\"\nimport IcBaselineLightbulb from \"~icons/ic/baseline-lightbulb\"\nimport IcBaselineFolderOpen from \"~icons/ic/baseline-folder-open\"\nimport IcBaselineContentPaste from \"~icons/ic/baseline-content-paste\"\nimport IcBaselineEdit from \"~icons/ic/baseline-edit\"\nimport IcBaselineEmojiSymbols from \"~icons/ic/baseline-emoji-symbols\"\nimport IcBaselineFormatColorFill from \"~icons/ic/baseline-format-color-fill\"\nimport IcBaselineBorderClear from \"~icons/ic/baseline-border-clear\"\n\nconst PanelButton = ({ className, as: Component = \"button\", ...props }) => {\n  return (\n    <Component\n      className={classNames(\n        \"inline-block p-2 font-medium bg-neutral-700 rounded\",\n        className,\n        {\n          \"hover:bg-neutral-600 cursor-pointer\": !props.disabled,\n        },\n      )}\n      {...props}\n    />\n  )\n}\n\nconst ToggablePanelButton = ({ value, className, ...props }) => {\n  return (\n    <PanelButton\n      className={classNames({\n        \"text-neutral-500\": !value,\n      })}\n      {...props}\n    />\n  )\n}\n\nconst App = () => {\n  const store = useStore()\n\n  const canPaste = \"readText\" in navigator.clipboard\n\n  return (\n    <div className=\"container flex flex-col mx-auto px-16 py-8 space-y-8 min-h-screen\">\n      <div className=\"flex space-x-1\">\n        <PanelButton as=\"label\">\n          <IcBaselineFolderOpen />\n          <input type=\"file\" hidden onChange={store.loadFile} />\n        </PanelButton>\n\n        <PanelButton\n          disabled={!canPaste}\n          title={\n            !canPaste && \"Your browser does not allow to read clipboard content\"\n          }\n          className={{\n            \"opacity-25\": !canPaste,\n          }}\n          onClick={store.paste}\n        >\n          <IcBaselineContentPaste />\n        </PanelButton>\n\n        <PanelButton onClick={store.toggleEditingLayout}>\n          <IcBaselineEdit />\n        </PanelButton>\n      </div>\n\n      {store.isEditingLayout && (\n        <div>\n          <TextArea\n            value={store.input}\n            onChange={(e) => {\n              store.setInput(e.target.value)\n            }}\n          />\n\n          <div className=\"flex items-center justify-end ml-auto text-right text-xs\">\n            <IcBaselineKeyboard />\n            &nbsp;{store.layout.keys.length} keys\n          </div>\n        </div>\n      )}\n\n      {store.isLayoutEmpty && (\n        <div className=\"flex flex-auto flex-col items-center justify-center text-xl rounded-2xl border-2 border-dashed border-neutral-700\">\n          <IcBaselineKeyboard className=\"h-64 w-64 text-neutral-700\" />\n          <span>\n            Open or paste a{\" \"}\n            <a\n              className=\"text-amber-500 underline\"\n              target=\"_blank\"\n              href=\"http://www.keyboard-layout-editor.com/\"\n              rel=\"noreferrer\"\n            >\n              KBL\n            </a>{\" \"}\n            layout to get started\n          </span>\n        </div>\n      )}\n\n      {!store.isLayoutEmpty && !store.isLayoutValid && (\n        <div className=\"flex flex-auto flex-col items-center justify-center text-xl rounded-2xl border-2 border-dashed border-neutral-700\">\n          <IcBaselineKeyboard className=\"h-64 w-64 text-neutral-700\" />\n          <span>{store.layoutError}</span>\n        </div>\n      )}\n\n      {!store.isLayoutEmpty && store.isLayoutValid && (\n        <div className=\"flex flex-col justify-center space-y-8\">\n          <div className=\"flex-col space-y-4 f\">\n            <Keyboard\n              layout={store.layout}\n              displayLabels={store.displayLabels}\n              lightsOff={store.lightsOff}\n              rgbColor={(i) => store.layers[store.activeLayer][i]}\n              onClickKey={(i) => {\n                store.toggleRGBColor(i)\n              }}\n            />\n          </div>\n          <div className=\"flex items-center\">\n            <LayerSelector\n              activeLayer={store.activeLayer}\n              layers={store.layers}\n              onSelect={store.setActiveLayer}\n              onChangeLayerCount={(offset) => {\n                store.setLayerCount(store.layerCount + offset)\n              }}\n            />\n\n            <div className=\"flex ml-auto space-x-1\">\n              <ToggablePanelButton\n                value={store.displayLabels}\n                onClick={store.toggleLabels}\n              >\n                <IcBaselineEmojiSymbols />\n              </ToggablePanelButton>\n\n              <ToggablePanelButton\n                value={!store.lightsOff}\n                onClick={store.toggleLights}\n              >\n                <IcBaselineLightbulb />\n              </ToggablePanelButton>\n            </div>\n          </div>\n\n          <div className=\"flex\">\n            <Palette\n              activeColor={store.activeColor}\n              colors={COLORS}\n              onSelectColor={store.setActiveColor}\n            />\n            <div className=\"flex items-center ml-auto space-x-1\">\n              <a\n                className=\"flex items-center justify-center h-8 w-8 cursor-pointer\"\n                onClick={() => {\n                  store.fillLayer(store.activeColor)\n                }}\n              >\n                <IcBaselineFormatColorFill />\n              </a>\n              <a\n                className=\"flex items-center justify-center h-8 w-8 cursor-pointer\"\n                onClick={() => {\n                  store.fillLayer(color.hsv(0, 0, 0))\n                }}\n              >\n                <IcBaselineBorderClear />\n              </a>\n            </div>\n          </div>\n          <TextArea showCopy disabled value={store.asQMK} />\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default observer(App)\n","import React from \"react\"\nimport { createRoot } from \"react-dom/client\"\n\nimport \"./index.css\"\nimport App from \"./components/App\"\nimport { StoreProvider } from \"./hooks\"\n\nconst root = createRoot(document.getElementById(\"root\"))\nroot.render(\n    <StoreProvider>\n        <App />\n    </StoreProvider>\n)\n"],"names":["cloneDeep","merge","range","StoreContext","React","createContext","StoreProvider","children","store","useLocalObservable","createStore","restoreState","autorun","persistState","_jsx","useStore","useContext","Palette","activeColor","colors","onSelectColor","map","color","classNames","outline","backgroundColor","observer","LABEL_CLASSES","Keycap","x","y","width","height","keySize","padding","keyColor","rgbColor","hsv","onClick","labels","legendColor","textColor","title","lightsOff","displayLabels","actualWidth","actualHeight","innerScale","innerWidth","innerHeight","fade","isEqual","array","borderRadius","positions","top","left","background","side","darken","boxShadow","alpha","Math","round","borderColor","lighten","label","i","bottom","right","Keyboard","layout","onClickKey","keys","length","max","row","key","TextArea","value","showCopy","minRows","maxRows","onChange","props","ref","useRef","rows","setRows","useState","useEffect","scrollHeight","current","lineHeight","getComputedStyle","Number","replace","currentRows","ceil","min","navigator","clipboard","writeText","IcBaselineCopy","Button","className","LayerSelector","layers","activeLayer","onSelect","onChangeLayerCount","layer","IcBaselineAdd","IcBaselineMinus","PanelButton","as","Component","disabled","ToggablePanelButton","App","canPaste","_jsxs","IcBaselineFolderOpen","loadFile","paste","IcBaselineContentPaste","toggleEditingLayout","IcBaselineEdit","isEditingLayout","input","e","setInput","target","IcBaselineKeyboard","isLayoutEmpty","isLayoutValid","layoutError","toggleRGBColor","setActiveLayer","offset","setLayerCount","layerCount","toggleLabels","IcBaselineEmojiSymbols","toggleLights","IcBaselineLightbulb","COLORS","setActiveColor","fillLayer","IcBaselineFormatColorFill","IcBaselineBorderClear","asQMK","root","createRoot","document","getElementById","render"],"mappings":"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"}